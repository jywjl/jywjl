<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>局域网精灵-专业版</title>
    <link rel="icon" href="favicon.ico" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="js/vars.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <style>
        .wordLeft {
            margin-left: 10px;
        }
    </style>
    <script type="text/javascript">
        function check_os() {
            if (navigator.userAgent.indexOf("Windows") != -1) {
                return "windows"
            }
            if (navigator.userAgent.indexOf("Android") != -1) {
                return "android"
            }
            if (navigator.userAgent.indexOf('Macintosh') != -1) {
                return "mac"
            }
            return "linux"
        }
        function submit() {
            var username = prompt('输入你的用户名');
            console.log(username)
            location.href = 'http://' + window.server + '/' + username
        }
        function download() {
            switch (check_os()) {
                case 'windows':
                    location.href = findLatest(version_history.windows).url
                    break;
                case 'mac':
                    location.href = findLatest(version_history.mac).url
                    break;
                case 'linux':
                    location.href = findLatest(version_history.linux).url
                    break;
                case 'android':
                    location.href = findLatest(version_history.android).url
                    break;
            }
        }
        var xhr = new XMLHttpRequest()
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                console.log(xhr.responseText);
                window.server = xhr.responseText
            }
        }
        xhr.open("GET", "https://jywjl.github.io/apis/server", true)
        xhr.send(null)
    </script>
</head>

<body>
    <nav class="nav-extended cyan">
        <div class="nav-wrapper">
            <a href="#" class="brand-logo wordLeft" style="font-size: 20px;">局域网精灵专业版</a>
            <a href="#" data-target="mobile-demo" class="sidenav-trigger">
                <span class="fa fa-bars" aria-hidden="true">菜单</span>
            </a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="price.html">价格</a></li>
                <li><a href="/download.html">下载</a></li>
                <li><a href="#" onclick="submit()">我的主页</a></li>
                <li><a href="contact.html">联系作者</a></li>
            </ul>
        </div>
        <div class="nav-content">
        </div>
    </nav>

    <ul class="sidenav" id="mobile-demo">
        <li><a href="price.html">价格</a></li>
        <li><a href="/download.html">下载</a></li>
        <li><a href="#" onclick="submit()">我的主页</a></li>
        <li><a href="contact.html">联系作者</a></li>
    </ul>
    <div id="app"
        style="display: flex;flex-direction: column;align-items: center;min-height: 900px;background-image: url(images/site_background.jpeg)">
        <h4 style="color: white">局域网精灵 - 专业版</h4>
        <h5 style="color: white">功能强劲！ <a href="price.html">立即购买</a> </h5>
        <div style="display:flex;flex-direction: row; max-width: 600px;width: 80%;align-items: center;justify-content: space-around">
            <img style="width: 40%; margin: 10px" src="images/android_screenshot.jpg">
            <img style="width: 60%; margin: 10px" src="images/desktop_screenshot.png">
        </div>
        <div style="margin-top: 10px;">
            <button class="btn waves-effect waves-light" type="button" name="download" id="download"
                onclick="download()">立即下载
            </button>
            <a class='dropdown-trigger btn-flat' style="color: white" href='#' data-target='dropdown1'>其他版本</a>
            <!-- Dropdown Structure -->
            <ul id='dropdown1' class='dropdown-content'>
                <li><a v-bind:href='url_android'>安卓</a></li>
                <li class="divider" tabindex="-1"></li>
                <li><a v-bind:href='url_windows'>Windows</a></li>
                <li><a v-bind:href='url_mac'>Mac OS</a></li>
                <li><a v-bind:href='url_linux'>Linux 64位</a></li>
            </ul>
        </div>
    </div>
    <script>
        app = new Vue({
            el: '#app',
            data: {
                url_windows: findLatest(version_history.windows).url,
                url_linux: findLatest(version_history.linux).url,
                url_android: findLatest(version_history.android).url,
                url_mac: findLatest(version_history.mac).url,
            }
        })
        M.AutoInit()
        var input = document.getElementById('username')
        if (input) {
            input.addEventListener("keyup", function (event) {
                event.preventDefault();
                if (event.keyCode === 13) {
                    var username = input.value
                    console.log(username)
                    location.href = 'http://' + window.server + '/' + username
                }
            });
        }
        input.focus()
    </script>
</body>

</html>